angular.module("jkuri.datepicker",[]).directive("ngDatepicker",["$document",function(a){"use strict";var e=function(a,e){a.format=e.format||"YYYY-MM-DD",a.viewFormat=e.viewFormat||"Do MMMM YYYY",a.locale=e.locale||"en",a.firstWeekDaySunday=a.$eval(e.firstWeekDaySunday)||!1,a.placeholder=e.placeholder||""};return{restrict:"EA",require:"?ngModel",scope:{initial:"="},link:function(n,t,i,d){if(e(n,i),n.calendarOpened=!1,n.days=[],n.dayNames=[],n.viewValue=null,n.dateValue=null,moment.locale(n.locale),"undefined"==typeof n.initial||"Invalid date"===n.initial||""===n.initial)var l=moment();else var r=new Date(n.initial),l=moment(r);var o=function(a){var e=a.endOf("month").date(),t=a.month(),i=a.year(),d=1,l=n.firstWeekDaySunday===!0?a.set("date",2).day():a.set("date",1).day();1!==l&&(d-=l-1),n.dateValue=a.format("MMMM YYYY"),n.days=[];for(var r=d;e>=r;r+=1)n.days.push(r>0?{day:r,month:t+1,year:i,enabled:!0}:{day:null,month:null,year:null,enabled:!1})},s=function(){for(var a=moment(n.firstWeekDaySunday===!0?"2015-06-07":"2015-06-01"),e=0;7>e;e+=1)n.dayNames.push(a.format("ddd")),a.add("1","d")};"undefined"!=typeof n.initial&&"Invalid date"!==n.initial&&""!==n.initial&&(d.$setViewValue(l.format(n.format)),n.viewValue=l.format(n.viewFormat)),s(),n.showCalendar=function(){n.calendarOpened=!0,o(l)},n.closeCalendar=function(){n.calendarOpened=!1},n.prevYear=function(){l.subtract(1,"Y"),o(l)},n.prevMonth=function(){l.subtract(1,"M"),o(l)},n.nextMonth=function(){l.add(1,"M"),o(l)},n.nextYear=function(){l.add(1,"Y"),o(l)},n.selectDate=function(a,e){a.preventDefault();var t=moment(e.day+"."+e.month+"."+e.year,"DD.MM.YYYY");d.$setViewValue(t.format(n.format)),n.viewValue=t.format(n.viewFormat),n.closeCalendar()};var c=["ng-datepicker","ng-datepicker-input"];void 0!==i.id&&c.push(i.id),a.on("click",function(a){if(n.calendarOpened){var e,t=0;if(a.target){for(e=a.target;e;e=e.parentNode){var i=e.id,d=e.className;if(void 0!==i)for(t=0;t<c.length;t+=1)if(i.indexOf(c[t])>-1||d.indexOf(c[t])>-1)return}n.closeCalendar(),n.$apply()}}})},template:'<div><input type="text" ng-focus="showCalendar()" ng-value="viewValue" class="ng-datepicker-input" placeholder="{{ placeholder }}" autocomplete="off"></div><div class="ng-datepicker" ng-show="calendarOpened">  <div class="controls">    <div class="left">      <i class="fa fa-backward prev-year-btn" ng-click="prevYear()"></i>      <i class="fa fa-angle-left prev-month-btn" ng-click="prevMonth()"></i>    </div>    <span class="date" ng-bind="dateValue"></span>    <div class="right">      <i class="fa fa-angle-right next-month-btn" ng-click="nextMonth()"></i>      <i class="fa fa-forward next-year-btn" ng-click="nextYear()"></i>    </div>  </div>  <div class="day-names">    <span ng-repeat="dn in dayNames">      <span>{{ dn }}</span>    </span>  </div>  <div class="calendar">    <span ng-repeat="d in days">      <span class="day" ng-click="selectDate($event, d)" ng-class="{disabled: !d.enabled}">{{ d.day }}</span>    </span>  </div></div>'}}]);